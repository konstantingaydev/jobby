{% extends 'base.html' %}

{% block content %}
<div class="container mt-4">
    <!-- Header Section -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <div>
                    <h1 class="display-6 mb-1">{{ template_data.title }}</h1>
                    <p class="text-muted mb-0">Manage your job postings and find the best candidates</p>
                </div>
                <div>
                    <a href="{% url 'jobs.create' %}" class="btn btn-primary btn-lg">
                        <i class="fas fa-plus"></i> Post New Job
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Stats Cards -->
    <div class="row mb-4">
        <div class="col-md-4">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">Active Jobs</h4>
                            <h2 class="mb-0">{{ user.posted_jobs.count }}</h2>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-briefcase fa-2x opacity-75"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">Total Views</h4>
                            <h2 class="mb-0">1,234</h2>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-eye fa-2x opacity-75"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-md-4">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h4 class="card-title">Candidates Found</h4>
                            <h2 class="mb-0">67</h2>
                        </div>
                        <div class="align-self-center">
                            <i class="fas fa-users fa-2x opacity-75"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Action Cards -->
    <div class="row mb-4">
        <div class="col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-briefcase me-2"></i>Job Management
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Create, edit, and manage your job postings. Track applications and manage your hiring pipeline.</p>
                    
                    <div class="d-grid gap-2">
                        <a href="{% url 'jobs.my_jobs' %}" class="btn btn-primary">
                            <i class="fas fa-list me-2"></i>View My Jobs
                        </a>
                        <a href="{% url 'jobs.create' %}" class="btn btn-outline-primary">
                            <i class="fas fa-plus me-2"></i>Post New Job
                        </a>
                        <a href="{% url 'jobs.index' %}" class="btn btn-outline-secondary">
                            <i class="fas fa-search me-2"></i>Browse All Jobs
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-success text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-users me-2"></i>Candidate Search
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Search through our database of qualified candidates. Filter by skills, location, experience, and more.</p>
                    
                    <div class="d-grid gap-2">
                        <a href="{% url 'recruiter:candidate_search' %}" class="btn btn-success">
                            <i class="fas fa-search me-2"></i>Search Candidates
                        </a>
                        <a href="{% url 'recruiter:candidate_search' %}?skills=python" class="btn btn-outline-success">
                            <i class="fas fa-code me-2"></i>Find Developers
                        </a>
                        <a href="{% url 'recruiter:candidate_search' %}?location=remote" class="btn btn-outline-success">
                            <i class="fas fa-home me-2"></i>Remote Workers
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="col-lg-4 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-header bg-info text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-envelope me-2"></i>Messaging
                    </h5>
                </div>
                <div class="card-body">
                    <p class="card-text">Communicate with candidates directly through our platform. Send emails, track conversations, and manage your outreach.</p>
                    
                    <div class="d-grid gap-2">
                        <a href="{% url 'messaging:internal_messages' %}" class="btn btn-info">
                            <i class="fas fa-comments me-2"></i>View Messages
                        </a>
                        <a href="{% url 'messaging:start_conversation' %}" class="btn btn-outline-info">
                            <i class="fas fa-plus me-2"></i>New Message
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activity Section -->
    <div class="row">
        <div class="col-12">
            <div class="card shadow-sm">
                <div class="card-header">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-clock me-2"></i>Recent Activity
                    </h5>
                </div>
                <div class="card-body">
                    {% if user.posted_jobs.all %}
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>Job Title</th>
                                        <th>Company</th>
                                        <th>Location</th>
                                        <th>Posted</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for job in user.posted_jobs.all|slice:":5" %}
                                    <tr>
                                        <td>
                                            <strong>{{ job.title }}</strong>
                                            <br>
                                            <small class="text-muted">{{ job.get_employment_type_display }}</small>
                                        </td>
                                        <td>{{ job.company_name }}</td>
                                        <td>
                                            {{ job.location }}
                                            {% if job.is_remote %}
                                                <span class="badge bg-success ms-1">Remote</span>
                                            {% endif %}
                                        </td>
                                        <td>{{ job.created_at|date:"M d, Y" }}</td>
                                        <td>
                                            {% if job.is_active %}
                                                <span class="badge bg-success">Active</span>
                                            {% else %}
                                                <span class="badge bg-secondary">Inactive</span>
                                            {% endif %}
                                        </td>
                                        <td>
                                            <div class="btn-group btn-group-sm">
                                                <a href="{% url 'jobs.show' id=job.id %}" class="btn btn-outline-primary" title="View">
                                                    <i class="fas fa-eye"></i>
                                                </a>
                                                <a href="{% url 'jobs.edit' id=job.id %}" class="btn btn-outline-secondary" title="Edit">
                                                    <i class="fas fa-edit"></i>
                                                </a>
                                            </div>
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                        
                        {% if user.posted_jobs.count > 5 %}
                            <div class="text-center mt-3">
                                <a href="{% url 'jobs.my_jobs' %}" class="btn btn-outline-primary">
                                    View All {{ user.posted_jobs.count }} Jobs
                                </a>
                            </div>
                        {% endif %}
                    {% else %}
                        <div class="text-center py-4">
                            <i class="fas fa-briefcase fa-3x text-muted mb-3"></i>
                            <h5>No jobs posted yet</h5>
                            <p class="text-muted">Start by posting your first job to attract qualified candidates.</p>
                            <a href="{% url 'jobs.create' %}" class="btn btn-primary">
                                <i class="fas fa-plus me-2"></i>Post Your First Job
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Tips Section -->
    <div class="row mt-4">
        <div class="col-12">
            <div class="card border-info">
                <div class="card-header bg-info text-white">
                    <h5 class="card-title mb-0">
                        <i class="fas fa-lightbulb me-2"></i>Recruiting Tips
                    </h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4">
                            <h6><i class="fas fa-target text-primary me-2"></i>Write Clear Job Descriptions</h6>
                            <p class="small text-muted">Be specific about requirements and responsibilities to attract the right candidates.</p>
                        </div>
                        <div class="col-md-4">
                            <h6><i class="fas fa-dollar-sign text-success me-2"></i>Include Salary Information</h6>
                            <p class="small text-muted">Jobs with salary ranges get 30% more applications than those without.</p>
                        </div>
                        <div class="col-md-4">
                            <h6><i class="fas fa-search text-info me-2"></i>Use Relevant Keywords</h6>
                            <p class="small text-muted">Include industry-specific terms and skills to improve searchability.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
